<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Memory Game </title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<style>
    *
{
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: monospace;
}
body{
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: #0a3c2f;
}
.container
{
    position: relative;
    display: flex;
    justify-content: center;
    align-items: center;
    flex-direction: column;
    gap: 30px;
    background: #0d614b;
    padding: 40px 60px;
}
h2{
    font-size: 3em;
    color: #fff;
    text-transform: uppercase;
    letter-spacing: 0.1em;
}
.reset
{
    padding: 15px 20px;
    color: #267c65;
    background: #fff;
    border: none;
    font-size: 1.5em;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    cursor: pointer;
    font-weight: 600;
}
.reset:focus{
    color: #fff;
    background: #267c65;

}
.game{
    width: 430px;
    height: 430px;
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    transform-style: preserve-3d;
    perspective: 500px;

}

.item{
    position: relative;
    width: 100px;
    height: 100px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 3em;
    background: #fff;
    transform: rotateY(180deg);
    transition: 0.25s;

}

.item.boxOpen 
{
    transform: rotateY(0deg);
}

.item::after
{
    content:'';
    position: absolute;
    inset: 0;
    background: #209d7b;
    transition: 0.25s;
    transform: rotateY(0deg);
    backface-visibility: hidden;

}

.boxOpen:after ,
.boxMatch:after
{
    transform: rotateY(180deg);
}
</style>
<body>
    <div class="container">
        <h2>Memory Game</h2>
        <div class="game"></div>
        <button class="reset" onclick="resetGame();">Reset Game</button>
        <div id="timer">Timer(Max Time 60sec): <span id="time">0</span> seconds</div>
        <div id="score">Score: <span id="points">0</span></div>
    </div>
    <script>
        const emojis = ["😂", "😂", "😡", "😡", "🎃", "🎃", "👍", "👍", "🤍", "🤍", "❌", "❌", "💭", "💭", "♛", "♛"];
        let shuffledEmojis = shuffleArray(emojis);

        let openCards = [];
        let matchedCards = [];
        let timerInterval;
        let timeElapsed = 0;
        let score = 0;
        const gameTimeLimit = 60; // Set the time limit for the game in seconds

        function resetGame() {
            openCards = [];
            matchedCards = [];
            clearInterval(timerInterval);
            timeElapsed = 0;
            score = 0;
            document.getElementById('time').innerText = '0';
            document.getElementById('points').innerText = '0';
            document.querySelector('.game').innerHTML = '';
            shuffledEmojis = shuffleArray(emojis); // Reshuffle emojis
            initGame();
            startTimer();
        }
        

        function startTimer() {
            timerInterval = setInterval(() => {
                timeElapsed++;
                document.getElementById('time').innerText = timeElapsed;
                if (timeElapsed >= gameTimeLimit) {
                    clearInterval(timerInterval);
                    endGame();
                }
            }, 1000);
        }

        function shuffleArray(array) {
            const shuffled = array.slice();
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function initGame() {
            shuffledEmojis.forEach(emoji => {
                const card = document.createElement('div');
                card.className = 'item';
                card.innerHTML = emoji;
                card.addEventListener('click', () => handleCardClick(card));
                document.querySelector('.game').appendChild(card);
            });
        }

        function handleCardClick(card) {
            if (openCards.length < 2 && !openCards.includes(card) && !matchedCards.includes(card)) {
                card.classList.add('boxOpen');
                openCards.push(card);

                if (openCards.length === 2) {
                    setTimeout(checkCardMatch, 500);
                }
            }
        }

        function checkCardMatch() {
            const [card1, card2] = openCards;
            if (card1.innerHTML === card2.innerHTML) {
                card1.classList.add('boxMatch');
                card2.classList.add('boxMatch');
                matchedCards.push(card1, card2);
                openCards = [];
                score += 10;
                document.getElementById('points').innerText = score;

                if (matchedCards.length === emojis.length) {
                    clearInterval(timerInterval);
                    endGame();
                }
            } else {
                card1.classList.remove('boxOpen');
                card2.classList.remove('boxOpen');
                openCards = [];
            }
        }

        function endGame() {
            const choice = confirm('Game over! Time limit reached. Final Score: ' + score + '\nDo you want to play again?');
            if (choice) {
                resetGame();
            } else {
                alert('Thank you for playing!');
                // You can add any additional logic here for quitting the game
            }
        }

        initGame();
        startTimer();
    </script>
</body>
</html>
